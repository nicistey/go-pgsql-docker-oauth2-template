FROM golang:latest

#создаем директорию где будет лежать приложение
RUN mkdir /app
##копируем все файлы нашего сервера сюда, точка означает все файлы в текущей директории(тут 2 аргумента, 1 аршумент директория откуда копируем)
ADD . /app/
# копируем .env из поддиректории Server/cmd
COPY /cmd/.env /app/.env 
#даем понять в каком катологе работаем с помощью воркдир
WORKDIR /app/cmd
# 1 аргумент мы билдим приложение, флаг o говорит,что это оюъектный файл 2 аргумент куда сохронить
RUN go build -o main .
WORKDIR /app
#инструкцияя для запуска
CMD ["/app/cmd/main"]

#PS C:\source\MyServerGo> sudo docker build -t courses .
# docker run --publish 6080:8090 --name courses_container --rm courses перебрасываем порт нашего пк к докеру порту, имяя,  указываем что потом докер удалит контейнер после остановки 